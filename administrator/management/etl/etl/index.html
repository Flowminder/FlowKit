



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>ETL</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@7.1.2/dist/mermaid.css">
    
      <link rel="stylesheet" href="../../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../../css/pandas-dataframe.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="#095798" data-md-color-accent="#2977b8">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#working-with-flowetl" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="FlowKit" aria-label="FlowKit" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              FlowKit
            </span>
            <span class="md-header-nav__topic">
              
                ETL
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/Flowminder/FlowKit" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Flowminder/FlowKit
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../../.." class="md-tabs__link">
        FlowKit
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../analyst/" class="md-tabs__link">
          Analysts
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../developer/" class="md-tabs__link">
          Developers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../" class="md-tabs__link md-tabs__link--active">
          System Administrators
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="FlowKit" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    FlowKit
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/Flowminder/FlowKit" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Flowminder/FlowKit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="FlowKit" class="md-nav__link">
      FlowKit
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Analysts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Analysts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/" title="Analyst" class="md-nav__link">
      Analyst
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      FlowClient
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        FlowClient
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/flowclient/example_usage/" title="Example usage" class="md-nav__link">
      Example usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2" type="checkbox" id="nav-3-2-2">
    
    <label class="md-nav__link" for="nav-3-2-2">
      Flowclient
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-2">
        Flowclient
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2-1" type="checkbox" id="nav-3-2-2-1">
    
    <label class="md-nav__link" for="nav-3-2-2-1">
      Flowclient
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-2-2-1">
        Flowclient
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowclient/flowclient/" title="flowclient" class="md-nav__link">
      flowclient
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowclient/flowclient/client/" title="client" class="md-nav__link">
      client
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Worked examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Worked examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/worked_examples/" title="Worked examples" class="md-nav__link">
      Worked examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/worked_examples/flows-above-normal/" title="Flows above normal" class="md-nav__link">
      Flows above normal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/worked_examples/commuting-patterns/" title="Commuting patterns" class="md-nav__link">
      Commuting patterns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/worked_examples/cell-towers-per-region/" title="Cell towers per region" class="md-nav__link">
      Cell towers per region
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/worked_examples/unique-subscriber-counts/" title="Unique subscriber counts" class="md-nav__link">
      Unique subscriber counts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/worked_examples/joined-spatial-aggregate/" title="Joined spatial aggregate" class="md-nav__link">
      Joined spatial aggregate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/autoflow/" title="AutoFlow" class="md-nav__link">
      AutoFlow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Advanced usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Advanced usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/advanced_usage/" title="Advanced usage" class="md-nav__link">
      Advanced usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5-2" type="checkbox" id="nav-3-5-2">
    
    <label class="md-nav__link" for="nav-3-5-2">
      Worked examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-5-2">
        Worked examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../analyst/advanced_usage/worked_examples/mobile-data-usage/" title="Mobile data usage" class="md-nav__link">
      Mobile data usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/" title="Information for Developers" class="md-nav__link">
      Information for Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/dev_environment_setup/" title="Developer install" class="md-nav__link">
      Developer install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Flowmachine
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Flowmachine
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1" type="checkbox" id="nav-4-3-1">
    
    <label class="md-nav__link" for="nav-4-3-1">
      Flowmachine
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-1">
        Flowmachine
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/" title="flowmachine" class="md-nav__link">
      flowmachine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-2" type="checkbox" id="nav-4-3-1-2">
    
    <label class="md-nav__link" for="nav-4-3-1-2">
      Core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-1-2">
        Core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/" title="core" class="md-nav__link">
      core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/cache/" title="cache" class="md-nav__link">
      cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/connection/" title="connection" class="md-nav__link">
      connection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/context/" title="context" class="md-nav__link">
      context
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/custom_query/" title="custom_query" class="md-nav__link">
      custom_query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/date_range/" title="date_range" class="md-nav__link">
      date_range
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/dependency_graph/" title="dependency_graph" class="md-nav__link">
      dependency_graph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/dummy_query/" title="dummy_query" class="md-nav__link">
      dummy_query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-2-9" type="checkbox" id="nav-4-3-1-2-9">
    
    <label class="md-nav__link" for="nav-4-3-1-2-9">
      Errors
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-2-9">
        Errors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/errors/" title="errors" class="md-nav__link">
      errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/errors/flowmachine_errors/" title="flowmachine_errors" class="md-nav__link">
      flowmachine_errors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/geotable/" title="geotable" class="md-nav__link">
      geotable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/grid/" title="grid" class="md-nav__link">
      grid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/hour_slice/" title="hour_slice" class="md-nav__link">
      hour_slice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/init/" title="init" class="md-nav__link">
      init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/join/" title="join" class="md-nav__link">
      join
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/join_to_location/" title="join_to_location" class="md-nav__link">
      join_to_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/logging/" title="logging" class="md-nav__link">
      logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-2-17" type="checkbox" id="nav-4-3-1-2-17">
    
    <label class="md-nav__link" for="nav-4-3-1-2-17">
      Mixins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-2-17">
        Mixins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/mixins/" title="mixins" class="md-nav__link">
      mixins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/mixins/geodata_mixin/" title="geodata_mixin" class="md-nav__link">
      geodata_mixin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/mixins/graph_mixin/" title="graph_mixin" class="md-nav__link">
      graph_mixin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/model/" title="model" class="md-nav__link">
      model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/model_result/" title="model_result" class="md-nav__link">
      model_result
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/query/" title="query" class="md-nav__link">
      query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/query_info_lookup/" title="query_info_lookup" class="md-nav__link">
      query_info_lookup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/query_state/" title="query_state" class="md-nav__link">
      query_state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/random/" title="random" class="md-nav__link">
      random
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-2-24" type="checkbox" id="nav-4-3-1-2-24">
    
    <label class="md-nav__link" for="nav-4-3-1-2-24">
      Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-2-24">
        Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/" title="server" class="md-nav__link">
      server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/action_handlers/" title="action_handlers" class="md-nav__link">
      action_handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/action_request_schema/" title="action_request_schema" class="md-nav__link">
      action_request_schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/exceptions/" title="exceptions" class="md-nav__link">
      exceptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-2-24-5" type="checkbox" id="nav-4-3-1-2-24-5">
    
    <label class="md-nav__link" for="nav-4-3-1-2-24-5">
      Query schemas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-4-3-1-2-24-5">
        Query schemas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/" title="query_schemas" class="md-nav__link">
      query_schemas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/aggregate_network_objects/" title="aggregate_network_objects" class="md-nav__link">
      aggregate_network_objects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/aggregation_unit/" title="aggregation_unit" class="md-nav__link">
      aggregation_unit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/base_exposed_query/" title="base_exposed_query" class="md-nav__link">
      base_exposed_query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/base_query_with_sampling/" title="base_query_with_sampling" class="md-nav__link">
      base_query_with_sampling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/custom_fields/" title="custom_fields" class="md-nav__link">
      custom_fields
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/daily_location/" title="daily_location" class="md-nav__link">
      daily_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/dfs_metric_total_amount/" title="dfs_metric_total_amount" class="md-nav__link">
      dfs_metric_total_amount
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/displacement/" title="displacement" class="md-nav__link">
      displacement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/dummy_query/" title="dummy_query" class="md-nav__link">
      dummy_query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/event_count/" title="event_count" class="md-nav__link">
      event_count
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/flowmachine_query/" title="flowmachine_query" class="md-nav__link">
      flowmachine_query
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/flows/" title="flows" class="md-nav__link">
      flows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/geography/" title="geography" class="md-nav__link">
      geography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/handset/" title="handset" class="md-nav__link">
      handset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/joined_spatial_aggregate/" title="joined_spatial_aggregate" class="md-nav__link">
      joined_spatial_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/location_event_counts/" title="location_event_counts" class="md-nav__link">
      location_event_counts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/location_introversion/" title="location_introversion" class="md-nav__link">
      location_introversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/meaningful_locations/" title="meaningful_locations" class="md-nav__link">
      meaningful_locations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/modal_location/" title="modal_location" class="md-nav__link">
      modal_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/nocturnal_events/" title="nocturnal_events" class="md-nav__link">
      nocturnal_events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/pareto_interactions/" title="pareto_interactions" class="md-nav__link">
      pareto_interactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/radius_of_gyration/" title="radius_of_gyration" class="md-nav__link">
      radius_of_gyration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/random_sample/" title="random_sample" class="md-nav__link">
      random_sample
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/spatial_aggregate/" title="spatial_aggregate" class="md-nav__link">
      spatial_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/subscriber_degree/" title="subscriber_degree" class="md-nav__link">
      subscriber_degree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/topup_amount/" title="topup_amount" class="md-nav__link">
      topup_amount
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/topup_balance/" title="topup_balance" class="md-nav__link">
      topup_balance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/total_network_objects/" title="total_network_objects" class="md-nav__link">
      total_network_objects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/unique_location_counts/" title="unique_location_counts" class="md-nav__link">
      unique_location_counts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/query_schemas/unique_subscriber_counts/" title="unique_subscriber_counts" class="md-nav__link">
      unique_subscriber_counts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/server/" title="server" class="md-nav__link">
      server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/server_config/" title="server_config" class="md-nav__link">
      server_config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/utils/" title="utils" class="md-nav__link">
      utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/server/zmq_helpers/" title="zmq_helpers" class="md-nav__link">
      zmq_helpers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/spatial_unit/" title="spatial_unit" class="md-nav__link">
      spatial_unit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/sqlalchemy_table_definitions/" title="sqlalchemy_table_definitions" class="md-nav__link">
      sqlalchemy_table_definitions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/sqlalchemy_utils/" title="sqlalchemy_utils" class="md-nav__link">
      sqlalchemy_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/subscriber_subsetter/" title="subscriber_subsetter" class="md-nav__link">
      subscriber_subsetter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/subset/" title="subset" class="md-nav__link">
      subset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/table/" title="table" class="md-nav__link">
      table
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/core/union/" title="union" class="md-nav__link">
      union
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3" type="checkbox" id="nav-4-3-1-3">
    
    <label class="md-nav__link" for="nav-4-3-1-3">
      Features
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-1-3">
        Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/" title="features" class="md-nav__link">
      features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-2" type="checkbox" id="nav-4-3-1-3-2">
    
    <label class="md-nav__link" for="nav-4-3-1-3-2">
      Dfs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-2">
        Dfs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/dfs/" title="dfs" class="md-nav__link">
      dfs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/dfs/total_amount_for_metric/" title="total_amount_for_metric" class="md-nav__link">
      total_amount_for_metric
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-3" type="checkbox" id="nav-4-3-1-3-3">
    
    <label class="md-nav__link" for="nav-4-3-1-3-3">
      Location
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-3">
        Location
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/" title="location" class="md-nav__link">
      location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/flows/" title="flows" class="md-nav__link">
      flows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/joined_spatial_aggregate/" title="joined_spatial_aggregate" class="md-nav__link">
      joined_spatial_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/location_introversion/" title="location_introversion" class="md-nav__link">
      location_introversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/meaningful_locations_aggregate/" title="meaningful_locations_aggregate" class="md-nav__link">
      meaningful_locations_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/meaningful_locations_od/" title="meaningful_locations_od" class="md-nav__link">
      meaningful_locations_od
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/pwo/" title="pwo" class="md-nav__link">
      pwo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_flows/" title="redacted_flows" class="md-nav__link">
      redacted_flows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_joined_spatial_aggregate/" title="redacted_joined_spatial_aggregate" class="md-nav__link">
      redacted_joined_spatial_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_location_introversion/" title="redacted_location_introversion" class="md-nav__link">
      redacted_location_introversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_location_metric/" title="redacted_location_metric" class="md-nav__link">
      redacted_location_metric
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_meaningful_locations_aggregate/" title="redacted_meaningful_locations_aggregate" class="md-nav__link">
      redacted_meaningful_locations_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_meaningful_locations_od/" title="redacted_meaningful_locations_od" class="md-nav__link">
      redacted_meaningful_locations_od
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_spatial_aggregate/" title="redacted_spatial_aggregate" class="md-nav__link">
      redacted_spatial_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_total_events/" title="redacted_total_events" class="md-nav__link">
      redacted_total_events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/redacted_unique_subscriber_counts/" title="redacted_unique_subscriber_counts" class="md-nav__link">
      redacted_unique_subscriber_counts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/spatial_aggregate/" title="spatial_aggregate" class="md-nav__link">
      spatial_aggregate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/total_events/" title="total_events" class="md-nav__link">
      total_events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/location/unique_subscriber_counts/" title="unique_subscriber_counts" class="md-nav__link">
      unique_subscriber_counts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-4" type="checkbox" id="nav-4-3-1-3-4">
    
    <label class="md-nav__link" for="nav-4-3-1-3-4">
      Network
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-4">
        Network
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/network/" title="network" class="md-nav__link">
      network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/network/total_network_objects/" title="total_network_objects" class="md-nav__link">
      total_network_objects
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-5" type="checkbox" id="nav-4-3-1-3-5">
    
    <label class="md-nav__link" for="nav-4-3-1-3-5">
      Raster
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-5">
        Raster
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/raster/" title="raster" class="md-nav__link">
      raster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/raster/raster_statistics/" title="raster_statistics" class="md-nav__link">
      raster_statistics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-6" type="checkbox" id="nav-4-3-1-3-6">
    
    <label class="md-nav__link" for="nav-4-3-1-3-6">
      Spatial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-6">
        Spatial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/" title="spatial" class="md-nav__link">
      spatial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/circles/" title="circles" class="md-nav__link">
      circles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/distance_matrix/" title="distance_matrix" class="md-nav__link">
      distance_matrix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/geography/" title="geography" class="md-nav__link">
      geography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/location_area/" title="location_area" class="md-nav__link">
      location_area
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/location_cluster/" title="location_cluster" class="md-nav__link">
      location_cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/spatial/versioned_infrastructure/" title="versioned_infrastructure" class="md-nav__link">
      versioned_infrastructure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-7" type="checkbox" id="nav-4-3-1-3-7">
    
    <label class="md-nav__link" for="nav-4-3-1-3-7">
      Subscriber
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-7">
        Subscriber
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/" title="subscriber" class="md-nav__link">
      subscriber
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/call_days/" title="call_days" class="md-nav__link">
      call_days
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/contact_balance/" title="contact_balance" class="md-nav__link">
      contact_balance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/contact_reciprocal/" title="contact_reciprocal" class="md-nav__link">
      contact_reciprocal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/contact_reference_locations_stats/" title="contact_reference_locations_stats" class="md-nav__link">
      contact_reference_locations_stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/daily_location/" title="daily_location" class="md-nav__link">
      daily_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/day_trajectories/" title="day_trajectories" class="md-nav__link">
      day_trajectories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/displacement/" title="displacement" class="md-nav__link">
      displacement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/distance_counterparts/" title="distance_counterparts" class="md-nav__link">
      distance_counterparts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/distance_series/" title="distance_series" class="md-nav__link">
      distance_series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/entropy/" title="entropy" class="md-nav__link">
      entropy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/event_count/" title="event_count" class="md-nav__link">
      event_count
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/event_type_proportion/" title="event_type_proportion" class="md-nav__link">
      event_type_proportion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/first_location/" title="first_location" class="md-nav__link">
      first_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/handset_stats/" title="handset_stats" class="md-nav__link">
      handset_stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/hartigan_cluster/" title="hartigan_cluster" class="md-nav__link">
      hartigan_cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/imputed_distance_series/" title="imputed_distance_series" class="md-nav__link">
      imputed_distance_series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/interevent_interval/" title="interevent_interval" class="md-nav__link">
      interevent_interval
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/interevent_period/" title="interevent_period" class="md-nav__link">
      interevent_period
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/iterative_median_filter/" title="iterative_median_filter" class="md-nav__link">
      iterative_median_filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/label_event_score/" title="label_event_score" class="md-nav__link">
      label_event_score
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/last_location/" title="last_location" class="md-nav__link">
      last_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/location_visits/" title="location_visits" class="md-nav__link">
      location_visits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/mds_volume/" title="mds_volume" class="md-nav__link">
      mds_volume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/meaningful_locations/" title="meaningful_locations" class="md-nav__link">
      meaningful_locations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/metaclasses/" title="metaclasses" class="md-nav__link">
      metaclasses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/modal_location/" title="modal_location" class="md-nav__link">
      modal_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/most_frequent_location/" title="most_frequent_location" class="md-nav__link">
      most_frequent_location
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/new_subscribers/" title="new_subscribers" class="md-nav__link">
      new_subscribers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/nocturnal_events/" title="nocturnal_events" class="md-nav__link">
      nocturnal_events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/pareto_interactions/" title="pareto_interactions" class="md-nav__link">
      pareto_interactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/per_contact_event_stats/" title="per_contact_event_stats" class="md-nav__link">
      per_contact_event_stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/per_location_event_stats/" title="per_location_event_stats" class="md-nav__link">
      per_location_event_stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/radius_of_gyration/" title="radius_of_gyration" class="md-nav__link">
      radius_of_gyration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/scores/" title="scores" class="md-nav__link">
      scores
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/subscriber_call_durations/" title="subscriber_call_durations" class="md-nav__link">
      subscriber_call_durations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/subscriber_degree/" title="subscriber_degree" class="md-nav__link">
      subscriber_degree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/subscriber_tacs/" title="subscriber_tacs" class="md-nav__link">
      subscriber_tacs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/topup_amount/" title="topup_amount" class="md-nav__link">
      topup_amount
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/topup_balance/" title="topup_balance" class="md-nav__link">
      topup_balance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/total_active_periods/" title="total_active_periods" class="md-nav__link">
      total_active_periods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/subscriber/unique_location_counts/" title="unique_location_counts" class="md-nav__link">
      unique_location_counts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-3-8" type="checkbox" id="nav-4-3-1-3-8">
    
    <label class="md-nav__link" for="nav-4-3-1-3-8">
      Utilities
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-1-3-8">
        Utilities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/" title="utilities" class="md-nav__link">
      utilities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/event_table_subset/" title="event_table_subset" class="md-nav__link">
      event_table_subset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/events_tables_union/" title="events_tables_union" class="md-nav__link">
      events_tables_union
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/feature_collection/" title="feature_collection" class="md-nav__link">
      feature_collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/group_values/" title="group_values" class="md-nav__link">
      group_values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/histogram_aggregation/" title="histogram_aggregation" class="md-nav__link">
      histogram_aggregation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/multilocation/" title="multilocation" class="md-nav__link">
      multilocation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/sets/" title="sets" class="md-nav__link">
      sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/subscriber_locations/" title="subscriber_locations" class="md-nav__link">
      subscriber_locations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/features/utilities/validators/" title="validators" class="md-nav__link">
      validators
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1-4" type="checkbox" id="nav-4-3-1-4">
    
    <label class="md-nav__link" for="nav-4-3-1-4">
      Models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-1-4">
        Models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/models/" title="models" class="md-nav__link">
      models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/models/louvain/" title="louvain" class="md-nav__link">
      louvain
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/utils/" title="utils" class="md-nav__link">
      utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowmachine/flowmachine/versions/" title="versions" class="md-nav__link">
      versions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/api-spec.html" title="FlowAPI specification" class="md-nav__link">
      FlowAPI specification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Architectural Decision Records (ADR)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Architectural Decision Records (ADR)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/" title="Architectural Decision Records" class="md-nav__link">
      Architectural Decision Records
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0001-pipenv-for-package-and-dependency-management/" title="Pipenv for package / dependency management and virtual environments" class="md-nav__link">
      Pipenv for package / dependency management and virtual environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0002-pytest-for-testing/" title="Pytest for testing Flowkit components" class="md-nav__link">
      Pytest for testing Flowkit components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0003-http-api/" title="HTTP API as Single Access Point" class="md-nav__link">
      HTTP API as Single Access Point
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0004-http-framework/" title="Quart as HTTP Framework" class="md-nav__link">
      Quart as HTTP Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0005-IPC-methods/" title="Interprocess Communication (IPC) Methods - zeromq and redis" class="md-nav__link">
      Interprocess Communication (IPC) Methods - zeromq and redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0006-JWTs/" title="JWTs for API Access Control" class="md-nav__link">
      JWTs for API Access Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0007-mapbox-for-worked-examples/" title="Mapbox GL for map visualisations in the worked examples notebooks" class="md-nav__link">
      Mapbox GL for map visualisations in the worked examples notebooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0008-jupyter-notebooks-for-autoflow/" title="Jupyter notebooks for automated notebook execution and report generation in AutoFlow" class="md-nav__link">
      Jupyter notebooks for automated notebook execution and report generation in AutoFlow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0009-asciidoctor-pdf-for-notebook-conversion/" title="Asciidoctor PDF for converting Jupyter notebooks to PDF" class="md-nav__link">
      Asciidoctor PDF for converting Jupyter notebooks to PDF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../developer/adr/0010-prefect-for-autoflow/" title="Prefect for workflow definition and execution in AutoFlow" class="md-nav__link">
      Prefect for workflow definition and execution in AutoFlow
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      System Administrators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        System Administrators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../" title="Administrator" class="md-nav__link">
      Administrator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../deployment/" title="Deploying FlowKit" class="md-nav__link">
      Deploying FlowKit
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3" checked>
    
    <label class="md-nav__link" for="nav-5-3">
      System management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        System management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cache/" title="Caching in FlowKit" class="md-nav__link">
      Caching in FlowKit
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2" type="checkbox" id="nav-5-3-2" checked>
    
    <label class="md-nav__link" for="nav-5-3-2">
      ETL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-3-2">
        ETL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        ETL
      </label>
    
    <a href="./" title="ETL" class="md-nav__link md-nav__link--active">
      ETL
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#working-with-flowetl" class="md-nav__link">
    Working with FlowETL
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#macros" class="md-nav__link">
    Macros
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-etl-pipelines" class="md-nav__link">
    Creating ETL pipelines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calls-data" class="md-nav__link">
    Calls data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms-data" class="md-nav__link">
    SMS data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mobile-data-session-mds-data" class="md-nav__link">
    Mobile data session (MDS) data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topup-data" class="md-nav__link">
    Topup data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-different-cdr-data-sources" class="md-nav__link">
    Connecting to different CDR data sources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-databases" class="md-nav__link">
    Remote databases
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql-database" class="md-nav__link">
    PostgreSQL database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-database" class="md-nav__link">
    Oracle database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mssql-database" class="md-nav__link">
    MSSQL database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv-files" class="md-nav__link">
    CSV Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-infrastructure-data" class="md-nav__link">
    Loading Infrastructure data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-gis-data" class="md-nav__link">
    Loading GIS data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-qa-checks" class="md-nav__link">
    Data QA checks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customising-etl-pipelines" class="md-nav__link">
    Customising ETL pipelines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-qa-checks" class="md-nav__link">
    Adding new QA checks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worked-example" class="md-nav__link">
    Worked example
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2-2" type="checkbox" id="nav-5-3-2-2">
    
    <label class="md-nav__link" for="nav-5-3-2-2">
      Flowetl
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-3-2-2">
        Flowetl
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2-2-1" type="checkbox" id="nav-5-3-2-2-1">
    
    <label class="md-nav__link" for="nav-5-3-2-2-1">
      Flowetl
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-5-3-2-2-1">
        Flowetl
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/" title="flowetl" class="md-nav__link">
      flowetl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/cli/" title="cli" class="md-nav__link">
      cli
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2-2-1-3" type="checkbox" id="nav-5-3-2-2-1-3">
    
    <label class="md-nav__link" for="nav-5-3-2-2-1-3">
      Mixins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-5-3-2-2-1-3">
        Mixins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/mixins/" title="mixins" class="md-nav__link">
      mixins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/mixins/fixed_sql_mixin/" title="fixed_sql_mixin" class="md-nav__link">
      fixed_sql_mixin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/mixins/fixed_sql_with_params_mixin/" title="fixed_sql_with_params_mixin" class="md-nav__link">
      fixed_sql_with_params_mixin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/mixins/table_name_macros_mixin/" title="table_name_macros_mixin" class="md-nav__link">
      table_name_macros_mixin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/mixins/wrapping_sql_mixin/" title="wrapping_sql_mixin" class="md-nav__link">
      wrapping_sql_mixin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2-2-1-4" type="checkbox" id="nav-5-3-2-2-1-4">
    
    <label class="md-nav__link" for="nav-5-3-2-2-1-4">
      Operators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-5-3-2-2-1-4">
        Operators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/" title="operators" class="md-nav__link">
      operators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/add_constraints_operator/" title="add_constraints_operator" class="md-nav__link">
      add_constraints_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/analyze_operator/" title="analyze_operator" class="md-nav__link">
      analyze_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/attach_operator/" title="attach_operator" class="md-nav__link">
      attach_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/cluster_operator/" title="cluster_operator" class="md-nav__link">
      cluster_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/create_foreign_staging_table_operator/" title="create_foreign_staging_table_operator" class="md-nav__link">
      create_foreign_staging_table_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/create_indexes_operator/" title="create_indexes_operator" class="md-nav__link">
      create_indexes_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/create_staging_view_operator/" title="create_staging_view_operator" class="md-nav__link">
      create_staging_view_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/extract_from_foreign_table_operator/" title="extract_from_foreign_table_operator" class="md-nav__link">
      extract_from_foreign_table_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/extract_from_view_operator/" title="extract_from_view_operator" class="md-nav__link">
      extract_from_view_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/qa_check_operator/" title="qa_check_operator" class="md-nav__link">
      qa_check_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/operators/update_etl_table_operator/" title="update_etl_table_operator" class="md-nav__link">
      update_etl_table_operator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2-2-1-5" type="checkbox" id="nav-5-3-2-2-1-5">
    
    <label class="md-nav__link" for="nav-5-3-2-2-1-5">
      Sensors
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-5-3-2-2-1-5">
        Sensors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/sensors/" title="sensors" class="md-nav__link">
      sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/sensors/data_present_sensor/" title="data_present_sensor" class="md-nav__link">
      data_present_sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/sensors/file_flux_sensor/" title="file_flux_sensor" class="md-nav__link">
      file_flux_sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/sensors/table_flux_sensor/" title="table_flux_sensor" class="md-nav__link">
      table_flux_sensor
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../flowetl/flowetl/util/" title="util" class="md-nav__link">
      util
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../logging/" title="Logging and audit trails" class="md-nav__link">
      Logging and audit trails
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/" title="Managing users and access" class="md-nav__link">
      Managing users and access
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#working-with-flowetl" class="md-nav__link">
    Working with FlowETL
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#macros" class="md-nav__link">
    Macros
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-etl-pipelines" class="md-nav__link">
    Creating ETL pipelines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calls-data" class="md-nav__link">
    Calls data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sms-data" class="md-nav__link">
    SMS data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mobile-data-session-mds-data" class="md-nav__link">
    Mobile data session (MDS) data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topup-data" class="md-nav__link">
    Topup data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-different-cdr-data-sources" class="md-nav__link">
    Connecting to different CDR data sources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-databases" class="md-nav__link">
    Remote databases
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql-database" class="md-nav__link">
    PostgreSQL database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oracle-database" class="md-nav__link">
    Oracle database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mssql-database" class="md-nav__link">
    MSSQL database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv-files" class="md-nav__link">
    CSV Files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-infrastructure-data" class="md-nav__link">
    Loading Infrastructure data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-gis-data" class="md-nav__link">
    Loading GIS data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-qa-checks" class="md-nav__link">
    Data QA checks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customising-etl-pipelines" class="md-nav__link">
    Customising ETL pipelines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-qa-checks" class="md-nav__link">
    Adding new QA checks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#worked-example" class="md-nav__link">
    Worked example
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>ETL</h1>
                
                <h2 id="working-with-flowetl">Working with FlowETL<a class="headerlink" href="#working-with-flowetl" title="Permanent link">&para;</a></h2>
<p>FlowETL manages the loading of CDR data into FlowDB. It is built on <a href="https://airflow.apache.org">Apache Airflow</a>, and a basic understanding of how to use Airflow will be very helpful in making the best use of FlowETL. We recommend you familiarise yourself with the Airflow <a href="https://airflow.apache.org/docs/stable/tutorial.html">tutorial</a>, and <a href="https://airflow.apache.org/docs/stable/concepts.html">key concepts</a> before continuing. You should also have some familiarity with SQL.</p>
<p>To work with FlowETL, it may be helpful to install the <a href="https://pypi.org/project/flowetl/">flowetl</a> module into your local Python environment. This is not a prerequisite, but can be helpful when writing pipelines.</p>
<p>Once your FlowETL deployment is running, you can monitor the progress of your ETL tasks using the web interface, and newly added or changed pipeline definitions will be automatically picked up. </p>
<h3 id="macros">Macros<a class="headerlink" href="#macros" title="Permanent link">&para;</a></h3>
<p>To help you write the SQL you'll need to create your data pipeline, FlowETL supplies several macros, in additional to those <a href="https://airflow.apache.org/docs/stable/macros.html">provided by Airflow</a>. These macros are filled in when a task is run.</p>
<table>
<thead>
<tr>
<th>Macro</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{{ params.cdr_type }}</code></td>
<td>The category of CDR data being loaded</td>
<td><code>"calls"</code></td>
</tr>
<tr>
<td><code>{{ table_name }}</code></td>
<td>The base name of the table from the date and cdr type</td>
<td><code>"mds_20200101"</code></td>
</tr>
<tr>
<td><code>{{ etl_schema }}</code></td>
<td>Name of the schema used for etl tables</td>
<td><code>"etl"</code></td>
</tr>
<tr>
<td><code>{{ final_schema }}</code></td>
<td>Schema under which the final table will be created</td>
<td><code>"events"</code></td>
</tr>
<tr>
<td><code>{{ parent_table }}</code></td>
<td>Supertable that the final table will inherit from</td>
<td><code>"calls"</code></td>
</tr>
<tr>
<td><code>{{ extract_table_name }}</code></td>
<td>Name of the table created to extract to</td>
<td><code>"extract_sms_20200101"</code></td>
</tr>
<tr>
<td><code>{{ staging_table_name }}</code></td>
<td>Name of the table or view created to extract <em>from</em></td>
<td><code>"staging_sms_20200101"</code></td>
</tr>
<tr>
<td><code>{{ final_table }}</code></td>
<td>Schema qualified name of the final table</td>
<td><code>"events.mds_20200101"</code></td>
</tr>
<tr>
<td><code>{{ extract_table }}</code></td>
<td>Schema qualified name of the table to be extracted to</td>
<td><code>"etl.extract_mds_20200101"</code></td>
</tr>
<tr>
<td><code>{{ staging_table }}</code></td>
<td>Schema qualified name of the table to be extracted <em>from</em></td>
<td><code>"etl.staging_mds_20200101"</code></td>
</tr>
</tbody>
</table>
<p>These macros are available when using the FlowETL <a href="../../../../flowetl/flowetl/operators">operators</a> and <a href="../../../../flowetl/flowetl/sensors">sensors</a>.</p>
<h3 id="creating-etl-pipelines">Creating ETL pipelines<a class="headerlink" href="#creating-etl-pipelines" title="Permanent link">&para;</a></h3>
<p>As with any Airflow-based system, you will need to create dag files to define your ETL pipelines. FlowETL provides a convenient helper function, <a href="../../../../flowetl/flowetl/util/#create_dag"><code>create_dag</code></a>, which automates this for most common usage scenarios. To create a pipeline, you will need to create a new file in the directory which you have bind mounted to the FlowETL container's DAG directory. This file will specify one data pipeline - we recommend creating a separate data pipeline for each CDR variant you expect to encounter.</p>
<p>You can find some example pipelines in the FlowETL section of our <a href="https://github.com/Flowminder/FlowKit/tree/master/flowetl/mounts/dags">GitHub repository</a>.</p>
<p>Because data comes in many forms, you must specify in SQL a transformation from your source data to the correct FlowDB schema for the CDR data type. You will need to write this transformation in the form of a <code>SELECT</code> statement, using the <code>{{ staging_table }}</code> macro as the source table.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When specifing a transform, you may not have (or need) all the fields specified in the schema. Any fields which are not included <em>still need to be specified in the transform</em>.
Fields which are not being extracted from your source data should be specified as <code>NULL::&lt;field_type&gt;</code>, and fields <em>must</em> be specified in your select statement in the order they are given in the tables below. </p>
<p>For example, a valid SQL extract statement for calls data with <em>only</em> the mandatory fields available:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">uuid_generate_v4</span><span class="p">()::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">id</span><span class="p">,</span> <span class="k">TRUE</span> <span class="k">as</span> <span class="n">outgoing</span><span class="p">,</span> <span class="n">event_time</span><span class="p">::</span><span class="n">TIMESTAMPTZ</span> <span class="k">as</span> <span class="n">datetime</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">NUMERIC</span> <span class="k">as</span> <span class="n">duration</span><span class="p">,</span>
<span class="k">NULL</span><span class="p">::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">network</span><span class="p">,</span> <span class="n">msisdn</span><span class="p">::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">msisdn</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">msisdn_counterpart</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">location_id</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">imsi</span><span class="p">,</span>
<span class="k">NULL</span><span class="p">::</span><span class="nb">TEXT</span> <span class="k">as</span> <span class="n">imei</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">as</span> <span class="n">tac</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">NUMERIC</span> <span class="k">as</span> <span class="n">operator_code</span><span class="p">,</span> <span class="k">NULL</span><span class="p">::</span><span class="nb">NUMERIC</span> <span class="k">as</span> <span class="n">country_code</span>

<span class="k">FROM</span> <span class="err">{{</span> <span class="n">staging_table</span> <span class="err">}}</span>
</code></pre></div>

</div>
<h4 id="calls-data">Calls data<a class="headerlink" href="#calls-data" title="Permanent link">&para;</a></h4>
<p>FlowDB uses a two-line format for calls data, similar to double entry bookkeeping. One row records information about the msisdn, location etc. of the <em>calling</em> party, and a second records the equivalent information for the receiver.
If your data is supplied in <em>one</em>-line format, you will need to transform it to two-lines as part of the extract step.</p>
<p>The result of your extract SQL must conform to this schema:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Optional</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>TEXT</td>
<td>✓</td>
<td>ID which matches this call to the counterparty record if available</td>
</tr>
<tr>
<td>outgoing</td>
<td>BOOLEAN</td>
<td>✓</td>
<td>True if this is the initiating record for the call</td>
</tr>
<tr>
<td>datetime</td>
<td>TIMESTAMPTZ</td>
<td>✗</td>
<td>The time the call began (we recommend storing this in UTC)</td>
</tr>
<tr>
<td>duration</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The length of time in fractional minutes that call lasted</td>
</tr>
<tr>
<td>network</td>
<td>TEXT</td>
<td>✓</td>
<td>The network this party was on</td>
</tr>
<tr>
<td>msisdn</td>
<td>TEXT</td>
<td>✗</td>
<td>The (deidentified) MSISDN of this party's phone</td>
</tr>
<tr>
<td>msisdn_counterpart</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) MSISDN of the other party's phone</td>
</tr>
<tr>
<td>location_id</td>
<td>TEXT</td>
<td>✓</td>
<td>The ID of the location, which should refer to a cell in <code>infrastructure.cells</code></td>
</tr>
<tr>
<td>imsi</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMSI of this party's phone</td>
</tr>
<tr>
<td>imei</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMEI of this party's phone</td>
</tr>
<tr>
<td>tac</td>
<td>NUMERIC(8)</td>
<td>✓</td>
<td>The TAC code of this party's handset</td>
</tr>
<tr>
<td>operator_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of this party's operator</td>
</tr>
<tr>
<td>country_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of this party's country</td>
</tr>
</tbody>
</table>
<h4 id="sms-data">SMS data<a class="headerlink" href="#sms-data" title="Permanent link">&para;</a></h4>
<p>As with calls, FlowDB uses a two-line format for sms data. One row records information about the msisdn, location etc. of the <em>sender</em> , and a second records the equivalent information for any receivers.</p>
<p>The result of your extract SQL must conform to this schema:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Optional</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>TEXT</td>
<td>✓</td>
<td>ID which matches this sms to the counterparty record if available</td>
</tr>
<tr>
<td>outgoing</td>
<td>BOOLEAN</td>
<td>✓</td>
<td>True if this is the initiating record for the sms</td>
</tr>
<tr>
<td>datetime</td>
<td>TIMESTAMPTZ</td>
<td>✗</td>
<td>The time the sms was sent (we recommend storing this in UTC)</td>
</tr>
<tr>
<td>network</td>
<td>TEXT</td>
<td>✓</td>
<td>The network this party was on</td>
</tr>
<tr>
<td>msisdn</td>
<td>TEXT</td>
<td>✗</td>
<td>The (deidentified) MSISDN of this party's phone</td>
</tr>
<tr>
<td>msisdn_counterpart</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) MSISDN of the other party's phone</td>
</tr>
<tr>
<td>location_id</td>
<td>TEXT</td>
<td>✓</td>
<td>The ID of the cell which handled this sms, which should refer to a cell in <code>infrastructure.cells</code></td>
</tr>
<tr>
<td>imsi</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMSI of this party's phone</td>
</tr>
<tr>
<td>imei</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMEI of this party's phone</td>
</tr>
<tr>
<td>tac</td>
<td>NUMERIC(8)</td>
<td>✓</td>
<td>The TAC code of this party's handset</td>
</tr>
<tr>
<td>operator_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of this party's operator</td>
</tr>
<tr>
<td>country_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of this party's country</td>
</tr>
</tbody>
</table>
<h4 id="mobile-data-session-mds-data">Mobile data session (MDS) data<a class="headerlink" href="#mobile-data-session-mds-data" title="Permanent link">&para;</a></h4>
<p>Because there is no counterparty for MDS data, FlowDB uses a one-line format for this data type, with the following schema:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Optional</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>TEXT</td>
<td>✓</td>
<td>ID which matches this call to the counterparty record if available</td>
</tr>
<tr>
<td>datetime</td>
<td>TIMESTAMPTZ</td>
<td>✗</td>
<td>The time the data session began (we recommend storing this in UTC)</td>
</tr>
<tr>
<td>duration</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The length of time in fractional minutes that data session lasted</td>
</tr>
<tr>
<td>volume_total</td>
<td>NUMERIC</td>
<td>✓</td>
<td>Data volume transferred in MB</td>
</tr>
<tr>
<td>volume_upload</td>
<td>NUMERIC</td>
<td>✓</td>
<td>Data volume sent in MB</td>
</tr>
<tr>
<td>volume_download</td>
<td>NUMERIC</td>
<td>✓</td>
<td>Data volume downloaded in MB</td>
</tr>
<tr>
<td>network</td>
<td>TEXT</td>
<td>✓</td>
<td>The network this party was on</td>
</tr>
<tr>
<td>msisdn</td>
<td>TEXT</td>
<td>✗</td>
<td>The (deidentified) MSISDN of this party's phone</td>
</tr>
<tr>
<td>location_id</td>
<td>TEXT</td>
<td>✓</td>
<td>The ID of the cell which connected this session, which should refer to a cell in <code>infrastructure.cells</code></td>
</tr>
<tr>
<td>imsi</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMSI of the phone</td>
</tr>
<tr>
<td>imei</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMEI of the phone</td>
</tr>
<tr>
<td>tac</td>
<td>NUMERIC(8)</td>
<td>✓</td>
<td>The TAC code of the handset</td>
</tr>
<tr>
<td>operator_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of the operator</td>
</tr>
<tr>
<td>country_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of the country</td>
</tr>
</tbody>
</table>
<h4 id="topup-data">Topup data<a class="headerlink" href="#topup-data" title="Permanent link">&para;</a></h4>
<p>As with MDS data, FlowDB uses a one-line format for topups, with the following schema:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Optional</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>TEXT</td>
<td>✓</td>
<td>ID which matches this call to the counterparty record if available</td>
</tr>
<tr>
<td>datetime</td>
<td>TIMESTAMPTZ</td>
<td>✗</td>
<td>The time the data session began (we recommend storing this in UTC)</td>
</tr>
<tr>
<td>type</td>
<td>TEXT</td>
<td>✓</td>
<td>Kind of topup</td>
</tr>
<tr>
<td>recharge_amount</td>
<td>NUMERIC</td>
<td>✓</td>
<td>Cost of topup</td>
</tr>
<tr>
<td>airtime_fee</td>
<td>NUMERIC</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>tax_and_fee</td>
<td>NUMERIC</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>pre_event_balance</td>
<td>NUMERIC</td>
<td>✓</td>
<td>Balance before topup applied</td>
</tr>
<tr>
<td>post_event_balance</td>
<td>NUMERIC</td>
<td>✓</td>
<td>Balance after topup applied</td>
</tr>
<tr>
<td>msisdn</td>
<td>TEXT</td>
<td>✗</td>
<td>The (deidentified) MSISDN of this party's phone</td>
</tr>
<tr>
<td>location_id</td>
<td>TEXT</td>
<td>✓</td>
<td>The ID of the cell which connected this session, which should refer to a cell in <code>infrastructure.cells</code></td>
</tr>
<tr>
<td>imsi</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMSI of the phone</td>
</tr>
<tr>
<td>imei</td>
<td>TEXT</td>
<td>✓</td>
<td>The (deidentified) IMEI of the phone</td>
</tr>
<tr>
<td>tac</td>
<td>NUMERIC(8)</td>
<td>✓</td>
<td>The TAC code of the handset</td>
</tr>
<tr>
<td>operator_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of the operator</td>
</tr>
<tr>
<td>country_code</td>
<td>NUMERIC</td>
<td>✓</td>
<td>The numeric code of the country</td>
</tr>
</tbody>
</table>
<p>FlowETL supports a variety of data sources, which are covered in more detail below.</p>
<h2 id="connecting-to-different-cdr-data-sources">Connecting to different CDR data sources<a class="headerlink" href="#connecting-to-different-cdr-data-sources" title="Permanent link">&para;</a></h2>
<h3 id="remote-databases">Remote databases<a class="headerlink" href="#remote-databases" title="Permanent link">&para;</a></h3>
<p>Extracting data from a remote database has significant benefits, because the source database provides guarantees about the integrity of the data in terms of data types, nullable values and so on. FlowDB uses PostgreSQL's foreign data wrapper mechanism to connect to external databases. In general, to use a remote database table as a source you should create a persistent foreign table that will contain the data (instructions of how to do this for the databases supported by FlowETL are given below), then you will need to provide an SQL snippet to use for extraction. For example, to extract three fields:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">event_time</span><span class="p">,</span> <span class="n">msisdn</span><span class="p">,</span> <span class="n">cell_id</span> <span class="k">FROM</span> <span class="err">{{</span> <span class="n">source_table</span> <span class="err">}}</span>
<span class="k">WHERE</span> <span class="n">event_time</span> <span class="o">&gt;=</span> <span class="s1">&#39;{{ ds_nodash }}&#39;</span> <span class="k">AND</span> <span class="n">event_time</span> <span class="o">&lt;</span> <span class="s1">&#39;{{ tomorrow_ds_nodash }}&#39;</span><span class="p">;</span>
</code></pre></div>

<p>Note the use of the <code>{{ source_table }}</code>, which you should provide as an argument to either <code>create_dag</code>, or <code>CreateStagingViewOperator</code>, and the datetime constraint using the <code>{{ ds_nodash }}</code> and  <code>{{ tomorrow_ds_nodash }}</code> <a href="https://airflow.apache.org/docs/stable/macros.html">Airflow macros</a>. Remote database extraction in FlowETL works by selecting a time delimited segment of your source table. If your source table is complex, or you will need to use multiple tables to contruct a suitable query, we recommend creating a view in your source database and connecting to the view.</p>
<p>You will also need to be able to connect to the remote database from inside FlowDB's docker container. If the remote database is also running as a container, you can achieve this by creating an overlay network and attaching both containers to it. </p>
<h4 id="postgresql-database">PostgreSQL database<a class="headerlink" href="#postgresql-database" title="Permanent link">&para;</a></h4>
<p>The <a href="https://www.postgresql.org/docs/current/postgres-fdw.html"><code>postgres_fdw</code> extension</a> allows FlowDB to communicate with other databases built on PostgreSQL. This makes data extraction from remote PostgreSQL-compatible databases (e.g. <a href="https://www.timescale.com">TimescaleDB</a>) simple. You will need to create a foreign server, map a user for it, and then specify the table and schema on the remote database you would like to make available within FlowDB:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="n">SERVER</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">postgres_server</span>
    <span class="k">FOREIGN</span> <span class="k">DATA</span> <span class="n">WRAPPER</span> <span class="n">postgres_fdw</span>
    <span class="k">OPTIONS</span> <span class="p">(</span>
        <span class="k">host</span> <span class="s1">&#39;&lt;foreign_host&gt;&#39;</span><span class="p">,</span>
        <span class="n">port</span> <span class="s1">&#39;&lt;foreign_port&gt;&gt;&#39;</span><span class="p">,</span>
        <span class="n">dbname</span> <span class="s1">&#39;&lt;foreign_db_name&gt;&#39;</span>
    <span class="p">);</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">MAPPING</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="k">FOR</span> <span class="n">flowdb</span>
    <span class="n">SERVER</span> <span class="n">postgres_server</span>
    <span class="k">OPTIONS</span> <span class="p">(</span>
        <span class="k">user</span> <span class="s1">&#39;&lt;postgres_db_user&gt;&#39;</span><span class="p">,</span>
        <span class="n">password</span> <span class="s1">&#39;&lt;postgres_db_password&gt;&#39;</span>
    <span class="p">);</span>

<span class="n">IMPORT</span> <span class="k">FOREIGN</span> <span class="k">SCHEMA</span> <span class="o">&lt;</span><span class="n">source_table_schema</span><span class="o">&gt;</span> <span class="k">LIMIT</span> <span class="k">TO</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">source_table</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="k">FROM</span> <span class="n">SERVER</span> <span class="n">foreign_db</span> <span class="k">INTO</span> <span class="n">etl</span><span class="p">;</span>
</code></pre></div>

<p>You can then use the remote table as a data source in FlowETL, by providing <code>"&lt;source_table_schema&gt;.&lt;source_table&gt;"</code> as the source table.</p>
<h4 id="oracle-database">Oracle database<a class="headerlink" href="#oracle-database" title="Permanent link">&para;</a></h4>
<p>FlowDB supports the <a href="https://github.com/laurenz/oracle_fdw">oracle_fdw</a> connector, but to conform with Oracle's licensing we do not distribute a container which includes it. You will need to supply Oracle client binaries, and build the container by downloading the <a href="https://github.com/Flowminder/FlowKit/tree/master/flowdb/oracle_fdw">Dockerfile and script</a> and running:</p>
<div class="highlight"><pre><span></span><code>docker build --build-arg <span class="nv">ORACLE_BINARY_SOURCE</span><span class="o">=</span>&lt;oracle_binary_url&gt; <span class="se">\</span>
              --build-arg <span class="nv">CODE_VERSION</span><span class="o">=</span>latest -t flowdb_with_oracle
</code></pre></div>

<p>Once you have built the image, you can use it in place of standard FlowDB.</p>
<p>To connect to Oracle, you will need to access FlowDB as the <code>flowdb</code> user and run:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="n">SERVER</span> <span class="n">oracle_server</span> <span class="k">FOREIGN</span> <span class="k">DATA</span> <span class="n">WRAPPER</span> <span class="n">oracle_fdw</span>
          <span class="k">OPTIONS</span> <span class="p">(</span><span class="n">dbserver</span> <span class="s1">&#39;//&lt;oracle_server&gt;:&lt;oracle_port&gt;/&lt;oracle_db&gt;&#39;</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">MAPPING</span> <span class="k">FOR</span> <span class="n">flowdb</span> <span class="n">SERVER</span> <span class="n">oracle_server</span>
          <span class="k">OPTIONS</span> <span class="p">(</span><span class="k">user</span> <span class="s1">&#39;&lt;oracle_user&gt;&#39;</span><span class="p">,</span> <span class="n">password</span> <span class="s1">&#39;&lt;oracle_password&gt;&#39;</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="k">FOREIGN</span> <span class="k">TABLE</span> <span class="n">oracle_source_table</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="n">fields</span><span class="o">&gt;</span>
       <span class="p">)</span> <span class="n">SERVER</span> <span class="n">oracle_server</span> <span class="k">OPTIONS</span> <span class="p">(</span><span class="k">schema</span> <span class="s1">&#39;&lt;schema&gt;&#39;</span><span class="p">,</span> <span class="k">table</span> <span class="s1">&#39;&lt;table_name&gt;&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Further instructions on use of the wrapper are available from the projects <a href="https://github.com/laurenz/oracle_fdw">Github repo</a>.</p>
<h4 id="mssql-database">MSSQL database<a class="headerlink" href="#mssql-database" title="Permanent link">&para;</a></h4>
<p>FlowDB includes <a href="https://github.com/tds-fdw/tds_fdw">tds_fdw</a>, which supports data extraction from Microsoft SQL server. Usage is very similar to the other remote database connections:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="n">SERVER</span> <span class="n">mssql_server</span>
    <span class="k">FOREIGN</span> <span class="k">DATA</span> <span class="n">WRAPPER</span> <span class="n">tds_fdw</span>
    <span class="k">OPTIONS</span> <span class="p">(</span><span class="n">servername</span> <span class="s1">&#39;&lt;remote_database_host&gt;&#39;</span><span class="p">,</span> <span class="n">port</span> <span class="s1">&#39;&lt;remote_database_port&gt;&#39;</span><span class="p">,</span> <span class="k">database</span> <span class="s1">&#39;&lt;remote_database_name&gt;&#39;</span><span class="p">,</span> <span class="n">tds_version</span> <span class="s1">&#39;&lt;tds_version&gt;&#39;</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">MAPPING</span> <span class="k">FOR</span> <span class="n">flowdb</span>
    <span class="n">SERVER</span> <span class="n">mssql_server</span> 
    <span class="k">OPTIONS</span> <span class="p">(</span><span class="n">username</span> <span class="s1">&#39;&lt;remote_user&gt;&#39;</span><span class="p">,</span> <span class="n">password</span> <span class="s1">&#39;&lt;remote_password&gt;&#39;</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="k">FOREIGN</span> <span class="k">TABLE</span> <span class="n">mssql_table</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="n">fields</span><span class="o">&gt;</span>
    <span class="p">)</span>
    <span class="n">SERVER</span> <span class="n">mssql_server</span>
    <span class="k">OPTIONS</span> <span class="p">(</span><span class="k">table_name</span> <span class="s1">&#39;&lt;schema_qualified_table_name&gt;&#39;</span><span class="p">,</span> <span class="n">row_estimate_method</span> <span class="s1">&#39;showplan_all&#39;</span><span class="p">);</span>
</code></pre></div>

<p>You should choose the tds version based on the software version of the remote database - additional information on the correct version for different MSSQL server versions is available <a href="http://www.freetds.org/userguide/choosingtdsprotocol.htm">here</a>.</p>
<h3 id="csv-files">CSV Files<a class="headerlink" href="#csv-files" title="Permanent link">&para;</a></h3>
<p>FlowETL can also be used to load data from files - useful if you're receiving data as a daily file dump. To load from a file, you'll need to ensure that the files have a predictable date based name, for example <code>calls_data_2019_05_01.csv.gz</code>, which you can capture using a (<a href="https://airflow.apache.org/docs/stable/concepts.html#id1">templated</a>) string. The filename pattern should include the absolute path to the files from <em>inside</em> your FlowDB container, for example a complete pattern to capture files with names like <code>calls_data_2019-05-01.csv.gz</code> in the <code>/etl/calls</code> data root might be <code>/etl/{{ params.cdr_type }}/{{ params.cdr_type }}_data_{{ ds }}</code>. This uses a combination of Airflow's <a href="https://airflow.apache.org/docs/stable/macros.html#default-variables">built-in macros</a>, and the <code>{{ params.cdr_type }}</code> macro supplied by FlowETL.</p>
<p>You will also need to specify the names and <a href="https://www.postgresql.org/docs/current/datatype.html">types</a> of the fields your CSV will contain as a dict. These will be used to create a <a href="https://www.postgresql.org/docs/current/file-fdw.html">foreign data wrapper</a> which allows FlowDB to treat your data file like a table, and helps ensure data integrity. You may optionally specify a program to be run to read your data file, for example <code>zcat</code> if your source data is compressed. You can either pass these arguments to the <a href="../../../../flowetl/flowetl/util/#create_dag"><code>create_dag</code></a> function, or use <a href="../../../../flowetl/flowetl/operators/create_foreign_staging_table_operator"><code>CreateForeignStagingTableOperator</code></a> directly if composing your DAG manually. If you are composing the DAG manually, you will need to use the <code>ExtractFromForeignTableOperator</code> to ensure that FlowETL correctly handles cleanup of intermediary ETL steps.</p>
<h2 id="loading-infrastructure-data">Loading Infrastructure data<a class="headerlink" href="#loading-infrastructure-data" title="Permanent link">&para;</a></h2>
<p>At this time, FlowETL does not provide helper functions loading infrastructure data. You can however still create a custom DAG for regular infrastructure data import using either the <code>CreateForeignStagingTableOperator</code> and <code>ExtractFromForeignTableOperator</code> operators, the <code>CreateStagingViewOperator</code> and <code>ExtractFromViewOperator</code>, or by using Airflow's existing <a href="https://airflow.apache.org/docs/stable/_api/index.html#operators-packages">collection of operators</a>.</p>
<p>Cell data should be loaded to the <code>infrastructure.cells</code> table, and contain fields as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>TEXT</td>
<td>ID of the cell as referenced in the CDR</td>
</tr>
<tr>
<td>version</td>
<td>INTEGER</td>
<td>Add a new row and increment if details of the cell change</td>
</tr>
<tr>
<td>site_id</td>
<td>TEXT</td>
<td>ID of the cell tower this cell is on</td>
</tr>
<tr>
<td>name</td>
<td>TEXT</td>
<td>Any name attached to this cell</td>
</tr>
<tr>
<td>type</td>
<td>TEXT</td>
<td>Type of the cell</td>
</tr>
<tr>
<td>msc</td>
<td>TEXT</td>
<td>Mobile switching centre</td>
</tr>
<tr>
<td>bsc_rnc</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>antenna_type</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>lac</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>height</td>
<td>NUMERIC</td>
<td></td>
</tr>
<tr>
<td>azimuth</td>
<td>NUMERIC</td>
<td></td>
</tr>
<tr>
<td>transmitter</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>max_range</td>
<td>NUMERIC</td>
<td>(m)</td>
</tr>
<tr>
<td>min_range</td>
<td>NUMERIC</td>
<td>(m)</td>
</tr>
<tr>
<td>electrical_tilt</td>
<td>NUMERIC</td>
<td></td>
</tr>
<tr>
<td>mechanical_downtilt</td>
<td>NUMERIC</td>
<td></td>
</tr>
<tr>
<td>date_of_first_service</td>
<td>DATE</td>
<td>Date this cell became operational</td>
</tr>
<tr>
<td>date_of_last_service</td>
<td>DATE</td>
<td>Date this cell ceased operation</td>
</tr>
<tr>
<td>geom_point</td>
<td>POINT</td>
<td>ESPG 4326 point location of the cell</td>
</tr>
<tr>
<td>geom_polygon</td>
<td>MULTIPOLYGON</td>
<td>ESPG 4326 coverage polygon of the cell</td>
</tr>
</tbody>
</table>
<p>This should generally be used in concert with the <code>infrastructure.sites</code> table:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>TEXT</td>
<td>ID of the site as referenced in the cells table</td>
</tr>
<tr>
<td>version</td>
<td>INTEGER</td>
<td>Add a new row and increment if details of the site change</td>
</tr>
<tr>
<td>name</td>
<td>TEXT</td>
<td>Any name attached to this cell</td>
</tr>
<tr>
<td>type</td>
<td>TEXT</td>
<td>Type of the cell</td>
</tr>
<tr>
<td>status</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>structure_type</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>is_cow</td>
<td>BOOLEAN</td>
<td>True indicates that this is a mobile tower</td>
</tr>
<tr>
<td>date_of_first_service</td>
<td>DATE</td>
<td>Date this site became operational</td>
</tr>
<tr>
<td>date_of_last_service</td>
<td>DATE</td>
<td>Date this site ceased operation</td>
</tr>
<tr>
<td>geom_point</td>
<td>POINT</td>
<td>ESPG 4326 point location of the site</td>
</tr>
<tr>
<td>geom_polygon</td>
<td>MULTIPOLYGON</td>
<td>ESPG 4326 coverage polygon of the site</td>
</tr>
</tbody>
</table>
<p>Where site information is not available, we advise that you populate the sites table as a function of the cells table.</p>
<h2 id="loading-gis-data">Loading GIS data<a class="headerlink" href="#loading-gis-data" title="Permanent link">&para;</a></h2>
<p>Good spatial data is critical to successful analysis using FlowKit, and you will want to obtain, at a minimum admin 0-3 boundaries for your country of interest. At this time, we recommend using the <a href="https://github.com/pramsey/pgsql-ogr-fdw">OGR foreign data wrapper</a> to load shapefiles.</p>
<p>Administrative boundaries should be loaded under the <code>geography</code> schema, and named as <code>admin&lt;level&gt;</code>. They should at a minimum contain <code>adminXname</code>, <code>adminXpcod</code> and <code>geom</code> fields. While it is possible to directly mount boundary data into the database using the OGR foreign data wrapper, we would recommend creating in-database tables and using the wrapper only for extraction, for example:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="n">SERVER</span> <span class="n">admin_boundaries_source</span>
        <span class="k">FOREIGN</span> <span class="k">DATA</span> <span class="n">WRAPPER</span> <span class="n">ogr_fdw</span>
        <span class="k">OPTIONS</span> <span class="p">(</span>
            <span class="n">datasource</span> <span class="s1">&#39;&lt;path_inside_container_to_admin_3_file&#39;</span><span class="p">,</span>
            <span class="n">format</span> <span class="s1">&#39;ESRI Shapefile&#39;</span> <span class="p">);</span>

<span class="k">CREATE</span> <span class="k">FOREIGN</span> <span class="k">TABLE</span> <span class="n">tmp_admin3</span> <span class="p">(</span>
    <span class="n">gid</span> <span class="nb">integer</span><span class="p">,</span>
    <span class="n">geom</span> <span class="n">geometry</span><span class="p">(</span><span class="n">Point</span><span class="p">,</span> <span class="mi">4326</span><span class="p">),</span>
    <span class="n">admin3name</span> <span class="nb">varchar</span><span class="p">,</span>
    <span class="n">admin3pcod</span> <span class="nb">integer</span>
    <span class="p">)</span>
    <span class="n">SERVER</span> <span class="n">admin_3_source</span>
    <span class="k">OPTIONS</span> <span class="p">(</span><span class="n">layer</span> <span class="s1">&#39;admin3&#39;</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">geography</span><span class="p">.</span><span class="n">admin3</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">gid</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">admin3name</span><span class="p">,</span> <span class="n">admin3pcod</span> <span class="k">FROM</span>
    <span class="n">tmp_admin3</span><span class="p">);</span>
</code></pre></div>

<p>You should also create an index on the <code>geom</code> column:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">admin3_geom_gist</span> <span class="k">ON</span> <span class="n">geography</span><span class="p">.</span><span class="n">admin3</span> <span class="k">USING</span> <span class="n">gist</span> <span class="p">(</span><span class="n">geom</span><span class="p">);</span>
</code></pre></div>

<h2 id="data-qa-checks">Data QA checks<a class="headerlink" href="#data-qa-checks" title="Permanent link">&para;</a></h2>
<p>FlowETL includes a small number of built in QA checks. These checks are not designed to pass or fail newly arriving data, but to provide you and your analysts with important caveats and metadata about the data you are working with. QA checks will run automatically if you are using the <a href="../../../../flowetl/flowetl/util/#create_dag"><code>create_dag</code></a> function, and their results will be available inside FlowDB in the <code>etl.post_etl_queries</code> table to both superusers, and the <code>flowmachine</code> role. If you are manually composing a DAG, you can use the <a href="../../../../flowetl/flowetl/util/#get_qa_checks"><code>get_qa_checks</code></a> function to return a list of QA check tasks, which can be scheduled in relation to the other tasks in the dag.</p>
<h2 id="customising-etl-pipelines">Customising ETL pipelines<a class="headerlink" href="#customising-etl-pipelines" title="Permanent link">&para;</a></h2>
<p>In addition to the <a href="../../../../flowetl/flowetl/util/#create_dag"><code>create_dag</code></a> function, FlowETL allows you to compose DAGs in exactly the same way as you would with AirFlow. You can mix and match FlowETL operators with AirFlow's built in ones, or extend FlowETL to add your own. Because the <code>create_dag</code> functions returns a DAG, you can also use the returned DAG as a basis for a pipeline and extend it further in the same DAG file. </p>
<h3 id="adding-new-qa-checks">Adding new QA checks<a class="headerlink" href="#adding-new-qa-checks" title="Permanent link">&para;</a></h3>
<p>Adding additional QA checks is as simple as writing an SQL select statement. To add your own custom checks, create a <code>qa_checks</code> subfolder in the directory where you are keeping your dags. You can then create your check as a <code>&lt;check name.sql&gt;</code> file, and it will automatically get picked up for the next run of the dag.</p>
<p>SQL files under the <code>qa_checks</code> directory are treated as applicable for all CDR types. If you need a type specific check, place it in <code>qa_checks/&lt;cdr_type&gt;</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To be a valid QA check, your select statement should return a single value.</p>
</div>
<p>When writing your QA check, you're almost certain to need to be able to refer to the table of data that's just been loaded. Because the SQL file will be <a href="https://airflow.apache.org/docs/stable/concepts.html#id1">templated</a>, you can use a macro which will be filled in when the check is run. The macro for the final table is <code>{{ final_table }}</code>.</p>
<p>Here's an example of a valid QA check; one of the defaults which records the number of just-added rows:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="err">{{</span> <span class="n">final_table</span> <span class="err">}}</span>
</code></pre></div>

<h2 id="worked-example">Worked example<a class="headerlink" href="#worked-example" title="Permanent link">&para;</a></h2>
<p>A complete worked example covering deploying and using FlowETL to load data from both a remote PostgreSQL database and CSV files can be found in the main <a href="https://github.com/Flowminder/FlowKit/tree/master/flowetl/deployment_example">FlowKit repository</a>. </p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../cache/" title="Caching in FlowKit" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Caching in FlowKit
              </span>
            </div>
          </a>
        
        
          <a href="../../../../flowetl/flowetl/" title="flowetl" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                flowetl
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/Flowminder" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/Flowminder" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../../../.."}})</script>
      
        <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
      
    
  </body>
</html>